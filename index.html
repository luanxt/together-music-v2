<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Together Music</title>

	<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

	<script>
		// Your web app's Firebase configuration
		const firebaseConfig = {
			apiKey: "AIzaSyBb6p2NUIQX7b8HnEhHI9YK3ccR5sCPdwQ",
			authDomain: "together-music.firebaseapp.com",
			projectId: "together-music",
			storageBucket: "together-music.appspot.com",
			messagingSenderId: "1014765577756",
			appId: "1:1014765577756:web:f191dd4dfe9e514756e1d9"
		};

		/* Initialize Firebase */
		firebase.initializeApp(firebaseConfig);

		/* Initialize Cloud Firestore and get a reference to the service */
		const firestoreDb = firebase.firestore();

		/* Together Music App logic below */
		/* Mỗi room sẽ tương đương với 1 colletion trong firestore */
		/*
			Cấu trúc 1 room:
			roomId: {
				playingMedia: {},
				mediaList: [],
				likeList: [],
				dislikeList: [],
			}
		*/

		/* Empty a room */
		function emptyRoom(roomId) {
			/* Delete collection */
			firestoreDb.collection(roomId).get().then(res => {
				res.forEach(element => {
					element.ref.delete();
				});
			});
		}

		// db.collection("users").doc("LA").set({
		// 	name: "Los Angeles",
		// 	state: "CA",
		// 	country: "USA"
		// })
		// .then(() => {
		// 	console.log("Document successfully written!");
		// })
		// .catch((error) => {
		// 	console.error("Error writing document: ", error);
		// });

		// db.collection("users").onSnapshot((snapshot) => {
		// 	snapshot.docChanges().forEach((change) => {
		// 		if (change.type === "added") {
		// 			console.log("New city: ", change.doc.data());
		// 		}
		// 		if (change.type === "modified") {
		// 			console.log("Modified city: ", change.doc.data());
		// 		}
		// 		if (change.type === "removed") {
		// 			console.log("Removed city: ", change.doc.data());
		// 		}
		// 	});
		// });

		// db.collection("users").add({
		// 	first: "Ada",
		// 	last: "Lovelace",
		// 	born: 1815
		// })
		// .then((docRef) => {
		// 	console.log("Document written with ID: ", docRef.id);
		// })
		// .catch((error) => {
		// 	console.error("Error adding document: ", error);
		// });

		// db.collection("users").get().then((querySnapshot) => {
		// 	querySnapshot.forEach((doc) => {
		// 		console.log(`${doc.id} => ${doc.data()}`);
		// 	});
		// });
	</script>
</head>

<body>
	<h1>Hello World</h1>
</body>

</html>